server:
  port: ${SERVER_PORT:8080}
  servlet:
    context-path: ${SERVER_CONTEXT_PATH:/api}
  compression:
    enabled: true
    mime-types: text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json
    min-response-size: 1024

spring:
  application:
    name: ${APP_NAME:unza-counseling-system}
  
  profiles:
    active: ${SPRING_PROFILES_ACTIVE:development}
  
  datasource:
    url: ${DATABASE_URL:jdbc:postgresql://localhost:5432/unza_counseling_db}
    username: ${DATABASE_USERNAME:postgres}
    password: ${DATABASE_PASSWORD:11111111}
    driver-class-name: org.postgresql.Driver
    hikari:
      maximum-pool-size: ${DB_POOL_SIZE:10}
      minimum-idle: ${DB_MIN_IDLE:5}
      connection-timeout: ${DB_CONNECTION_TIMEOUT:30000}
      idle-timeout: ${DB_IDLE_TIMEOUT:600000}
      max-lifetime: ${DB_MAX_LIFETIME:1800000}
      leak-detection-threshold: ${DB_LEAK_THRESHOLD:60000}
  
  jpa:
    hibernate:
      ddl-auto: ${JPA_DDL_AUTO:update}
    show-sql: ${JPA_SHOW_SQL:false}
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        jdbc:
          time_zone: UTC
        format_sql: ${HIBERNATE_FORMAT_SQL:true}
        use_sql_comments: ${HIBERNATE_SQL_COMMENTS:true}
    defer-datasource-initialization: false
  
  sql:
    init:
      mode: never
  
  jackson:
    serialization:
      write-dates-as-timestamps: false
    time-zone: ${APP_TIMEZONE:Africa/Lusaka}
    default-property-inclusion: non_null
    property-naming-strategy: SNAKE_CASE
  
  servlet:
    multipart:
      max-file-size: ${MAX_FILE_SIZE:10MB}
      max-request-size: ${MAX_REQUEST_SIZE:10MB}
      enabled: true
  
  data:
    web:
      pageable:
        default-page-size: ${DEFAULT_PAGE_SIZE:20}
        max-page-size: ${MAX_PAGE_SIZE:100}

  mail:
    host: ${MAIL_HOST:smtp.gmail.com}
    port: ${MAIL_PORT:587}
    username: ${MAIL_USERNAME:your-email@unza.zm}
    password: ${MAIL_PASSWORD:your-app-password}
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
            required: true

  redis:
    host: ${REDIS_HOST:localhost}
    port: ${REDIS_PORT:6379}
    password: ${REDIS_PASSWORD:}
    timeout: ${REDIS_TIMEOUT:2000}
    jedis:
      pool:
        max-active: ${REDIS_POOL_MAX_ACTIVE:8}
        max-idle: ${REDIS_POOL_MAX_IDLE:8}
        min-idle: ${REDIS_POOL_MIN_IDLE:0}

# JWT Configuration
jwt:
  secret: ${JWT_SECRET:UNZACounselingSystemSecretKey2024VerySecureAndLongEnough}
  expiration: ${JWT_EXPIRATION:86400000}
  refresh-expiration: ${JWT_REFRESH_EXPIRATION:604800000}

# CORS Configuration
cors:
  allowed-origins: ${CORS_ALLOWED_ORIGINS:http://localhost:3000,http://localhost:8081,http://localhost:4200}
  allowed-methods: ${CORS_ALLOWED_METHODS:GET,POST,PUT,DELETE,PATCH,OPTIONS}
  allowed-headers: ${CORS_ALLOWED_HEADERS:*}
  allow-credentials: ${CORS_ALLOW_CREDENTIALS:true}
  max-age: ${CORS_MAX_AGE:3600}

# Application Specific Configuration
app:
  name: ${APP_DISPLAY_NAME:UNZA Counseling Management System}
  version: ${APP_VERSION:1.0.0}
  timezone: ${APP_TIMEZONE:Africa/Lusaka}
  upload-dir: ${UPLOAD_DIR:uploads/}
  max-session-duration: ${MAX_SESSION_DURATION:90}
  appointment-reminder-hours: ${APPOINTMENT_REMINDER_HOURS:24}
  environment: ${APP_ENVIRONMENT:development}

# Logging Configuration
logging:
  level:
    root: ${LOG_LEVEL_ROOT:INFO}
    com:
      unza:
        counseling: ${LOG_LEVEL_APP:DEBUG}
    org:
      springframework:
        web: ${LOG_LEVEL_SPRING_WEB:DEBUG}
      hibernate:
        SQL: ${LOG_LEVEL_SQL:DEBUG}
        type:
          descriptor:
            sql:
              BasicBinder: ${LOG_LEVEL_SQL_PARAM:TRACE}
  pattern:
    console: ${LOG_PATTERN_CONSOLE:%d{yyyy-MM-dd HH:mm:ss} - %msg%n}
    file: ${LOG_PATTERN_FILE:%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n}
  file:
    name: ${LOG_FILE_NAME:logs/unza-counseling.log}
    max-size: ${LOG_FILE_MAX_SIZE:10MB}
    max-history: ${LOG_FILE_MAX_HISTORY:30}

# Management/Actuator Configuration
management:
  endpoints:
    web:
      exposure:
        include: ${ACTUATOR_ENDPOINTS:health,info,metrics,prometheus}
      base-path: ${ACTUATOR_BASE_PATH:/actuator}
  endpoint:
    health:
      show-details: ${ACTUATOR_HEALTH_DETAILS:when-authorized}
      probes:
        enabled: ${ACTUATOR_HEALTH_PROBES:true}
  metrics:
    export:
      prometheus:
        enabled: ${METRICS_PROMETHEUS_ENABLED:true}
    distribution:
      percentiles-histogram:
        http:
          server:
            requests: ${METRICS_HTTP_DISTRIBUTION:true}

# OpenAPI Configuration
springdoc:
  api-docs:
    path: ${OPENAPI_DOCS_PATH:/api-docs}
  swagger-ui:
    path: ${OPENAPI_SWAGGER_PATH:/swagger-ui.html}
    operations-sorter: ${OPENAPI_OPERATIONS_SORTER:method}
    tags-sorter: ${OPENAPI_TAGS_SORTER:alpha}
    filter: ${OPENAPI_SWAGGER_FILTER:true}
  info:
    title: ${OPENAPI_TITLE:UNZA Counseling Management System API}
    description: ${OPENAPI_DESCRIPTION:Comprehensive API for managing counseling services, appointments, and academic performance analysis}
    version: ${OPENAPI_VERSION:1.0.0}
    contact:
      name: ${OPENAPI_CONTACT_NAME:UNZA IT Department}
      email: ${OPENAPI_CONTACT_EMAIL:it@unza.zm}
    license:
      name: ${OPENAPI_LICENSE_NAME:UNZA License}
      url: ${OPENAPI_LICENSE_URL:https://unza.zm}

# Flyway Configuration
flyway:
  enabled: ${FLYWAY_ENABLED:true}
  locations: ${FLYWAY_LOCATIONS:classpath:db/migration}
  baseline-on-migrate: ${FLYWAY_BASELINE_ON_MIGRATE:true}
  validate-on-migrate: ${FLYWAY_VALIDATE_ON_MIGRATE:true}
  clean-disabled: ${FLYWAY_CLEAN_DISABLED:true}

# Cache Configuration
spring:
  cache:
    type: ${CACHE_TYPE:redis}
    redis:
      time-to-live: ${CACHE_TTL:3600000}
      use-key-prefix: ${CACHE_USE_KEY_PREFIX:true}
      cache-null-values: ${CACHE_NULL_VALUES:false}